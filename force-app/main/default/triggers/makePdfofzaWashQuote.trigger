trigger makePdfofzaWashQuote on zaWash_Quote__c (after insert) {

    
    List<zaWash_Quote__c> quotes = Trigger.new;

    // Create a list to store the PDFs
    List<Attachment> pdfs = new List<Attachment>();
    list<zaWash_Quote__c> accountnames=[select lead__r.name, Work_Order__r.address, Work_Order__r.street,Work_Type__r.name,account__r.name from zaWash_Quote__c where id in:trigger.new];
    list<CustomerOrder__c> customerOrders=[Select Name,Quantity__c,Price__c from CustomerOrder__c where zaWash_Quote__c in:trigger.new];
   
    integer i=0;
    // Iterate through each order and generate a PDF
    for (zaWash_Quote__c quote : quotes) {
        if(customerOrders.size()==0){
            system.debug('quote'+ quote.Work_Order__r.street+quote.Work_Order__r.address+accountnames[i].Work_Order__r.address+accountnames[i].Work_Order__r.street);
            string nameof='';
            if(accountnames[i].lead__r!=null){
                nameof=accountnames[i].lead__r.name;
            }else{
                nameof=accountnames[i].account__r.name;
            }
            DateTime todaysDate = System.today();
            String todaysDateStr = todaysDate.format('yyyy.MM.dd');
            System.debug(todaysDateStr);
            string Tax='';
            if(quote.Ex_VAT_Price__c==false){
                tax='0.0%';
            }
            else{
                tax='7.7%';
            }

            decimal taxcost=quote.Total_Quote_Price__c-quote.Service_Price__c;

            string htmlContent = '<table><tr><td><h1 style="font-size:30px">zaWash<br></br><br></br></h1></td><td>zawash Suisse Sarl, Route des Jeunes 4bis, 1227 Les Acacias , Suisse</td><td></td><td></td></tr></table><h1 style="color:#ccc">_______________________________________</h1><br></br><table><tr><td></td><td></td><td>'+nameof+'</td></tr><tr><td></td><td></td><td>';
            if(accountnames[i].Work_Order__r.street == null)
            {
                accountnames[i].Work_Order__r.street = '';
            }
            htmlContent = htmlContent + accountnames[i].Work_Order__r.street;
            htmlContent = htmlContent + '</td></tr></table><br></br><table><tr><td><h1 style="color:green">'+quote.name+'</h1></td></tr><tr><td><h3>Date of invoice :</h3></td></tr><tr><td><h4>'+todaysDateStr+'</h4></td></tr></table><h1 style="color:#ccc">_______________________________________</h1><br></br><table><tr style="font-weight:bold"><td>Description</td><td style="text-align:center">Quantity</td><td style="text-align:center">Unit Price</td><td style="text-align:center">Taxes</td><td style="text-align:right">Total price</td></tr><tr style="color:#555"><td>'+accountnames[i].Work_Type__r.name+'</td><td style="text-align:center">'+quote.Number_of_Cars__c+'</td><td style="text-align:center">'+quote.Service_Price__c+'</td><td style="text-align:center">'+tax+'</td><td style="text-align:right">'+quote.Total_Quote_Price__c+'</td></tr></table><table><tr><td></td><td>______________________________________</td></tr></table><table><tr><td></td><td></td><td><h4 style="text-align:left">Amount excluding tax</h4></td><td><h4 style="text-align:right">'+quote.Service_Price__c+'</h4></td></tr><tr><td></td><td></td><td><h4 style="text-align:left">TVA '+tax+'</h4></td><td><h4 style="text-align:right"> '+taxcost+'</h4></td></tr></table><table><tr><td></td><td>______________________________________</td></tr></table><table><tr><td></td><td></td><td><h4 style="text-align:left">Total Price</h4></td><td><h4 style="text-align:right">'+quote.Total_Quote_Price__c+'</h4></td></tr></table>';
            Blob pdfData = Blob.toPDF('<HTML><BODY>'+htmlContent+'</BODY></HTML>');
            i++;
            /*CreatePDFController CreatePDFControl=new CreatePDFController();

            CreatePDFControl.htmlString=htmlContent;
            CreatePDFControl.recordId=quote.Id;
            CreatePDFControl.createAndAttachPDF(htmlContent,quote.Id);
            pdfs.add(a);*/
            pdfs.add(new Attachment(ParentId = quote.Id, Body = pdfData, Name = 'Order_' + quote.Id + '.pdf', ContentType='application/pdf'));
        }

        // Insert the PDF attachments  
        else{

            system.debug('quote'+ quote.Work_Order__r.street+quote.Work_Order__r.address+accountnames[i].Work_Order__r.address+accountnames[i].Work_Order__r.street);
            string nameof='';
            if(accountnames[i].lead__r!=null){
                nameof=accountnames[i].lead__r.name;
            }else{
                nameof=accountnames[i].account__r.name;
            }
            DateTime todaysDate = System.today();
            String todaysDateStr = todaysDate.format('yyyy.MM.dd');
            System.debug(todaysDateStr);
            string Tax='';
            if(quote.Ex_VAT_Price__c==false){
                tax='0.0%';
            }
            else{
                tax='7.7%';
            }

            decimal taxcost=quote.Total_Quote_Price__c-quote.Service_Price__c;
            // Generate the PDF using the order data
            // Save the PDF as an attachmen
            // string htmlContent=  '<head> <meta content="text/html; charset=UTF-8" http-equiv="content-type"> <style type="text/css"> @import url("https://themes.googleusercontent.com/fonts/css?kit=RFda8w1V0eDZheqfcyQ4EGb3DKsRMD34dqg1gT8Z-p6isjtAVhoKeKPV_uAAgBOSk3k702ZOKiLJc3WVjuplzPesZW2xOQ-xsNqO47m55DA") .lst-kix_d52h1clnbs3c-5>li:before { content: "\0025a0  " } .lst-kix_d52h1clnbs3c-3>li:before { content: "\0025cf  " } .lst-kix_d52h1clnbs3c-2>li:before { content: "\0025a0  " } .lst-kix_d52h1clnbs3c-6>li:before { content: "\0025cf  " } .lst-kix_d52h1clnbs3c-1>li:before { content: "\0025cb  " } .lst-kix_d52h1clnbs3c-7>li:before { content: "\0025cb  " } .lst-kix_d52h1clnbs3c-0>li:before { content: "\00200b  " } .lst-kix_d52h1clnbs3c-8>li:before { content: "\0025a0  " } .lst-kix_3expns8knkd9-0>li:before { content: "\00200b  " } .lst-kix_3expns8knkd9-1>li:before { content: "\0025cb  " } ul.lst-kix_d52h1clnbs3c-5 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-6 { list-style-type: none } .lst-kix_3expns8knkd9-3>li:before { content: "\0025cf  " } ul.lst-kix_d52h1clnbs3c-7 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-8 { list-style-type: none } .lst-kix_3expns8knkd9-2>li:before { content: "\0025a0  " } .lst-kix_d52h1clnbs3c-4>li:before { content: "\0025cb  " } .lst-kix_3expns8knkd9-8>li:before { content: "\0025a0  " } .lst-kix_3expns8knkd9-7>li:before { content: "\0025cb  " } ul.lst-kix_d52h1clnbs3c-0 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-1 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-2 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-3 { list-style-type: none } ul.lst-kix_d52h1clnbs3c-4 { list-style-type: none } .lst-kix_3expns8knkd9-4>li:before { content: "\0025cb  " } .lst-kix_3expns8knkd9-5>li:before { content: "\0025a0  " } .lst-kix_3expns8knkd9-6>li:before { content: "\0025cf  " } ul.lst-kix_3expns8knkd9-2 { list-style-type: none } ul.lst-kix_3expns8knkd9-1 { list-style-type: none } ul.lst-kix_3expns8knkd9-4 { list-style-type: none } ul.lst-kix_3expns8knkd9-3 { list-style-type: none } ul.lst-kix_3expns8knkd9-0 { list-style-type: none } ul.lst-kix_3expns8knkd9-6 { list-style-type: none } ul.lst-kix_3expns8knkd9-5 { list-style-type: none } ul.lst-kix_3expns8knkd9-8 { list-style-type: none } ul.lst-kix_3expns8knkd9-7 { list-style-type: none } ol { margin: 0; padding: 0 } table td, table th { padding: 0 } .c25 { border-right-style: solid; padding: 7.2pt 7.2pt 7.2pt 7.2pt; border-bottom-color: #ffffff; border-top-width: 0pt; border-right-width: 0pt; border-left-color: #ffffff; vertical-align: top; border-right-color: #ffffff; border-left-width: 0pt; border-top-style: solid; border-left-style: solid; border-bottom-width: 0pt; width: 165pt; border-top-color: #ffffff; border-bottom-style: solid } .c20 { border-right-style: solid; padding: 7.2pt 7.2pt 7.2pt 7.2pt; border-bottom-color: #ffffff; border-top-width: 0pt; border-right-width: 0pt; border-left-color: #ffffff; vertical-align: top; border-right-color: #ffffff; border-left-width: 0pt; border-top-style: solid; border-left-style: solid; border-bottom-width: 0pt; width: 358.5pt; border-top-color: #ffffff; border-bottom-style: solid } .c14 { margin-left: 0pt; padding-top: 16pt; list-style-position: inside; text-indent: 45pt; padding-bottom: 0pt; line-height: 1.3; text-align: left; margin-right: 15pt } .c5 { color: #666666; font-weight: 400; text-decoration: none; vertical-align: baseline; font-size: 8pt; font-family: "Open Sans"; font-style: normal } .c1 { color: #000000; font-weight: 700; text-decoration: none; vertical-align: baseline; font-size: 9pt; font-family: "Open Sans"; font-style: normal } .c0 { color: #666666; font-weight: 400; text-decoration: none; vertical-align: baseline; font-size: 9pt; font-family: "Merriweather"; font-style: normal } .c3 { color: #000000; font-weight: 400; text-decoration: none; vertical-align: baseline; font-size: 9pt; font-family: "Open Sans"; font-style: normal } .c4 { color: #b7b7b7; font-weight: 700; text-decoration: none; vertical-align: baseline; font-size: 9pt; font-family: "Open Sans"; font-style: normal } .c9 { padding-top: 5pt; padding-bottom: 5pt; line-height: 1.0; page-break-after: avoid; text-align: left; margin-right: 15pt } .c11 { padding-top: 16pt; padding-bottom: 0pt; line-height: 1.0; page-break-after: avoid; text-align: left; margin-right: 15pt } .c29 { color: #666666; text-decoration: none; vertical-align: baseline; font-size: 6pt; font-family: "Merriweather"; font-style: normal } .c18 { color: #2079c7; text-decoration: none; vertical-align: baseline; font-size: 9pt; font-family: "Open Sans"; font-style: normal } .c16 { color: #2079c7; text-decoration: none; vertical-align: baseline; font-size: 10pt; font-family: "Open Sans"; font-style: normal } .c27 { padding-top: 16pt; padding-bottom: 0pt; line-height: 1.3; text-align: left; margin-right: 15pt } .c34 { padding-top: 0pt; padding-bottom: 6pt; line-height: 1.0; text-align: left; margin-right: 15pt } .c21 { padding-top: 30pt; padding-bottom: 0pt; line-height: 1.0; text-align: left; margin-right: 15pt } .c7 { padding-top: 6pt; padding-bottom: 0pt; line-height: 1.3; text-align: left; margin-right: 15pt } .c17 { text-decoration: none; vertical-align: baseline; font-size: 12pt; font-family: "Merriweather"; font-style: italic } .c31 { text-decoration: none; vertical-align: baseline; font-size: 36pt; font-family: "Merriweather"; font-style: normal } .c13 { text-decoration: none; vertical-align: baseline; font-size: 11pt; font-family: "Merriweather"; font-style: italic } .c2 { padding-top: 0pt; padding-bottom: 0pt; line-height: 1.15; text-align: left; margin-right: 15pt } .c32 { padding-top: 6pt; padding-bottom: 0pt; line-height: 1.0; text-align: left; margin-right: 15pt } .c24 { text-decoration: none; vertical-align: baseline; font-size: 11pt; font-family: "Merriweather"; font-style: normal } .c30 { border-spacing: 0; border-collapse: collapse; margin-right: auto } .c26 { background-color: #ffffff; max-width: 525.6pt; padding: 28.8pt 43.2pt 43.2pt 43.2pt } .c19 { margin-left: 0pt; list-style-position: inside; text-indent: 45pt } .c15 { padding: 0; margin: 0 } .c12 { color: #000000; font-weight: 400 } .c23 { font-weight: 400 } .c28 { height: 588pt } .c10 { height: 9pt } .c22 { color: #000000 } .c33 { font-style: italic } .c6 { font-weight: 700 } .c8 { height: 80pt } .title { padding-top: 0pt; color: #000000; font-weight: 700; font-size: 36pt; padding-bottom: 6pt; font-family: "Merriweather"; line-height: 1.0; text-align: left } .subtitle { padding-top: 0pt; color: #000000; font-size: 9pt; padding-bottom: 0pt; font-family: "Open Sans"; line-height: 1.15; text-align: left } li { color: #666666; font-size: 9pt; font-family: "Merriweather" } p { margin: 0; color: #666666; font-size: 9pt; font-family: "Merriweather" } h1 { padding-top: 30pt; color: #2079c7; font-weight: 700; font-size: 9pt; padding-bottom: 0pt; font-family: "Open Sans"; line-height: 1.0; text-align: left } h2 { padding-top: 16pt; color: #000000; font-weight: 700; font-size: 11pt; padding-bottom: 0pt; font-family: "Merriweather"; line-height: 1.0; page-break-after: avoid; text-align: left } h3 { padding-top: 5pt; color: #666666; font-size: 8pt; padding-bottom: 5pt; font-family: "Open Sans"; line-height: 1.0; page-break-after: avoid; text-align: left } h4 { padding-top: 8pt; -webkit-text-decoration-skip: none; color: #666666; text-decoration: underline; text-decoration-skip-ink: none; font-size: 11pt; padding-bottom: 0pt; font-family: "Trebuchet MS"; line-height: 1.3; page-break-after: avoid; text-align: left } h5 { padding-top: 8pt; color: #666666; font-size: 11pt; padding-bottom: 0pt; font-family: "Trebuchet MS"; line-height: 1.3; page-break-after: avoid; text-align: left } h6 { padding-top: 8pt; color: #666666; font-size: 11pt; padding-bottom: 0pt; font-family: "Trebuchet MS"; line-height: 1.3; page-break-after: avoid; font-style: italic; text-align: left } </style> </head> <body class="c26 doc-content"> <p class="c10 c32"><span class="c23 c29"></span></p><a id="t.b5e152db183d5bf10508dda6fb9beae91810a391"></a><a id="t.0"></a> <table class="c30"> <tr class="c8"> <td class="c20" colspan="1" rowspan="1"> <p class="c34 title" id="h.x8fm1uorkbaw"><span class="c22 c6 c31">Your Name</span></p> <p class="c2 subtitle" id="h.ymi089liagec"><span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit</span></p> </td> <td class="c25" colspan="1" rowspan="1"> <p class="c2"><span class="c3">123 Your Street</span></p> <p class="c2"><span class="c3">Your City, ST 12345</span></p> <p class="c2"><span class="c1">(123) 456-7890</span></p> <p class="c2"><span class="c1">no_reply@example.com</span></p> </td> </tr> <tr class="c28"> <td class="c20" colspan="1" rowspan="1"> <h1 class="c21" id="h.y7d3xdxnr44m"><span class="c18 c6">EXPERIENCE</span></h1> <h2 class="c11" id="h.rfgvkg2ifhfd"><span class="c22">Company, </span><span class="c12">Location</span><span class="c23">&nbsp;&mdash; </span><span class="c23 c33">Job Title</span></h2> <h3 class="c9" id="h.n64fgzu3lwuy"><span>MONTH 20XX - PRESENT</span></h3> <p class="c7"><span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h2 class="c11" id="h.wj0puh61kxsr"><span class="c22">Company, </span><span class="c12">Location</span><span class="c23">&nbsp;&mdash; </span><span class="c12 c13">Job Title</span></h2> <h3 class="c9" id="h.8hk593fs3sag"><span class="c5">MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h2 class="c11" id="h.1hxcpsc1hco2"><span>Company, </span><span class="c23">Location</span><span>&nbsp;</span><span class="c23">&mdash; </span><span class="c13 c12">Job Title</span></h2> <h3 class="c9" id="h.ybypdmed418m"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h1 class="c21" id="h.yk8luflkpwij"><span>EDUCATION</span></h1> <h2 class="c11" id="h.6wymnhinx9q5"><span>School</span><span>&nbsp;Name, </span><span class="c23">Location &mdash; </span><span class="c13 c12">Degree</span></h2> <h3 class="c9" id="h.7vtcyzeczjot"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore.</span></p> <h2 class="c11" id="h.czfiadnsgnzp"><span>School Name, </span><span class="c23">Location &mdash; </span><span class="c13 c12">Degree</span></h2> <h3 class="c9" id="h.miiyt1y6sl7g"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</span></p> <h1 class="c21" id="h.jhv78pp9wtzd"><span>PROJECTS</span></h1> <h2 class="c11" id="h.vm051rmyhoww"><span>Project Name </span><span class="c23">&mdash; </span><span class="c23 c33">Detail</span></h2> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span></p> </td> <td class="c25" colspan="1" rowspan="1"> <h1 class="c21" id="h.ca0awj8022e2"><span class="c6 c18">SKILLS</span></h1> <ul class="c15 lst-kix_d52h1clnbs3c-0 start"> <li class="c14"><span class="c0">Lorem ipsum dolor sit amet.</span></li> <li class="c7 c19"><span class="c0">Consectetuer adipiscing elit.</span></li> </ul> <ul class="c15 lst-kix_3expns8knkd9-0 start"> <li class="c7 c19"><span class="c0">Sed diam nonummy nibh euismod tincidunt.</span></li> </ul> <ul class="c15 lst-kix_d52h1clnbs3c-0"> <li class="c7 c19"><span class="c0">L&#8203;&#8203;&#8203;&zwnj;&#8203;aoreet dolore magna aliquam erat volutpat.</span></li> </ul> <h1 class="c21" id="h.tuxh7mwdaxox"><span class="c18 c6">AWARDS</span></h1> <p class="c27"><span class="c6">Lorem ipsum</span><span>&nbsp;</span><span class="c6">dolor sit</span><span class="c0">&nbsp;amet Consectetuer adipiscing elit, Sed diam nonummy</span></p> <p class="c7"><span class="c6">Nibh euismod tincidunt</span><span class="c0">&nbsp;ut laoreet dolore magna aliquam erat volutpat.</span></p> <p class="c7"><span class="c6">Lorem ipsum dolor sit</span><span class="c0">&nbsp;amet Consectetuer adipiscing elit, Sed diam nonummy</span></p> <p class="c7"><span class="c6">Nibh euismod tincidunt</span><span class="c0">&nbsp;ut laoreet dolore magna aliquam erat volutpat.</span></p> <h1 class="c21" id="h.cxxkes25b26"><span>LANGUAGES</span></h1> <p class="c27"><span class="c0">Lorem ipsum, Dolor sit amet, Consectetuer</span></p> </td> </tr> </table> <p class="c7 c10"><span class="c0"></span></p> </body>' ;
            // string htmlContent=  '<p class="c10 c32"><span class="c23 c29"></span></p><a id="t.b5e152db183d5bf10508dda6fb9beae91810a391"></a><a id="t.0"></a> <table class="c30"> <tr class="c8"> <td class="c20" colspan="1" rowspan="1"> <p class="c34 title" id="h.x8fm1uorkbaw"><span class="c22 c6 c31">Your Name</span></p> <p class="c2 subtitle" id="h.ymi089liagec"><span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit</span></p> </td> <td class="c25" colspan="1" rowspan="1"> <p class="c2"><span class="c3">123 Your Street</span></p> <p class="c2"><span class="c3">Your City, ST 12345</span></p> <p class="c2"><span class="c1">(123) 456-7890</span></p> <p class="c2"><span class="c1">no_reply@example.com</span></p> </td> </tr> <tr class="c28"> <td class="c20" colspan="1" rowspan="1"> <h1 class="c21" id="h.y7d3xdxnr44m"><span class="c18 c6">EXPERIENCE</span></h1> <h2 class="c11" id="h.rfgvkg2ifhfd"><span class="c22">Company, </span><span class="c12">Location</span><span class="c23">&nbsp;&mdash; </span><span class="c23 c33">Job Title</span></h2> <h3 class="c9" id="h.n64fgzu3lwuy"><span>MONTH 20XX - PRESENT</span></h3> <p class="c7"><span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h2 class="c11" id="h.wj0puh61kxsr"><span class="c22">Company, </span><span class="c12">Location</span><span class="c23">&nbsp;&mdash; </span><span class="c12 c13">Job Title</span></h2> <h3 class="c9" id="h.8hk593fs3sag"><span class="c5">MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h2 class="c11" id="h.1hxcpsc1hco2"><span>Company, </span><span class="c23">Location</span><span>&nbsp;</span><span class="c23">&mdash; </span><span class="c13 c12">Job Title</span></h2> <h3 class="c9" id="h.ybypdmed418m"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh.</span></p> <h1 class="c21" id="h.yk8luflkpwij"><span>EDUCATION</span></h1> <h2 class="c11" id="h.6wymnhinx9q5"><span>School</span><span>&nbsp;Name, </span><span class="c23">Location &mdash; </span><span class="c13 c12">Degree</span></h2> <h3 class="c9" id="h.7vtcyzeczjot"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore.</span></p> <h2 class="c11" id="h.czfiadnsgnzp"><span>School Name, </span><span class="c23">Location &mdash; </span><span class="c13 c12">Degree</span></h2> <h3 class="c9" id="h.miiyt1y6sl7g"><span>MONTH 20XX - MONTH 20XX</span></h3> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</span></p> <h1 class="c21" id="h.jhv78pp9wtzd"><span>PROJECTS</span></h1> <h2 class="c11" id="h.vm051rmyhoww"><span>Project Name </span><span class="c23">&mdash; </span><span class="c23 c33">Detail</span></h2> <p class="c7"><span class="c0">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span></p> </td> <td class="c25" colspan="1" rowspan="1"> <h1 class="c21" id="h.ca0awj8022e2"><span class="c6 c18">SKILLS</span></h1> <ul class="c15 lst-kix_d52h1clnbs3c-0 start"> <li class="c14"><span class="c0">Lorem ipsum dolor sit amet.</span></li> <li class="c7 c19"><span class="c0">Consectetuer adipiscing elit.</span></li> </ul> <ul class="c15 lst-kix_3expns8knkd9-0 start"> <li class="c7 c19"><span class="c0">Sed diam nonummy nibh euismod tincidunt.</span></li> </ul> <ul class="c15 lst-kix_d52h1clnbs3c-0"> <li class="c7 c19"><span class="c0">L&#8203;&#8203;&#8203;&zwnj;&#8203;aoreet dolore magna aliquam erat volutpat.</span></li> </ul> <h1 class="c21" id="h.tuxh7mwdaxox"><span class="c18 c6">AWARDS</span></h1> <p class="c27"><span class="c6">Lorem ipsum</span><span>&nbsp;</span><span class="c6">dolor sit</span><span class="c0">&nbsp;amet Consectetuer adipiscing elit, Sed diam nonummy</span></p> <p class="c7"><span class="c6">Nibh euismod tincidunt</span><span class="c0">&nbsp;ut laoreet dolore magna aliquam erat volutpat.</span></p> <p class="c7"><span class="c6">Lorem ipsum dolor sit</span><span class="c0">&nbsp;amet Consectetuer adipiscing elit, Sed diam nonummy</span></p> <p class="c7"><span class="c6">Nibh euismod tincidunt</span><span class="c0">&nbsp;ut laoreet dolore magna aliquam erat volutpat.</span></p> <h1 class="c21" id="h.cxxkes25b26"><span>LANGUAGES</span></h1> <p class="c27"><span class="c0">Lorem ipsum, Dolor sit amet, Consectetuer</span></p> </td> </tr> </table> <p class="c7 c10"><span class="c0"></span></p>';
            // string htmlContent= '<div style="display: flex;     margin-bottom: 4rem;    "> <div> <h1>zaWash</h1></div> <div style="margin-top: 2rem; margin-left: 1rem;color: green;">zawash Suisse Sarl <br>Route des Jeunes 4bis <br> 1227 Les Acacias <br> Suisse </div> </div> <hr style="width: 95%;"> <div style="color: green;position: relative;top: 1rem;margin-bottom: 3rem;left: 60%;">'+accountnames[i].account__r.name+' <br> {Address} </div> <h1 style="color: darkgreen;    position: relative;left: 3%;">'+quote.name+'</h1> <div style="font-family: sans-serif;font-weight: 700;position: relative;left: 3%;">Date of quote :   </div> <div style="font-family: sans-serif;font-weight: 100;position: relative;left: 3%;">'+quote.CreatedDate+'   </div> <hr style="width: 95%;"> <div style="display: flex; align-items: center;left: 6%;position: relative;"> <div style="font-family: sans-serif;font-weight: 700;">Description   </div> <div style="display: flex;     position: relative;    left: 40%;;"> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Quantity   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Unit Price   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Taxes   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Total price    </h4> </div> </div> <div style="display: flex; align-items: center;left: 6%;position: relative;"> <div style="font-family: sans-serif;font-weight: 100;">Description here    </div> <div style="display: flex;     position: relative;left: 40%;"> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">'+quote.Number_of_Cars__c+'    </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">'+quote.Service_Price__c+'    </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">0.00   </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">'+quote.Total_Quote_Price__c+'     </h4> </div> </div> <hr style="width: 45%;right: 3%;float: right;position: relative;"> <div style="left: 52%;position: relative; display:flex"> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;     ">Amount excluding tax</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 4rem;    ">'+quote.Total_Quote_Price__c+'    </h4> </div> <div style="left: 52%;position: relative; display:flex"> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;     ">0.00</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 12rem;    ">0.00   </h4> </div> <hr style="width: 45%;right: 3%;float: right;position: relative;"> <div style="left: 52%;position: relative; display:flex"> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;     ">Total</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 12rem;    ">'+quote.Total_Quote_Price__c+'    </h4> </div>';
            // string htmlContent='<div style="max-width: 400px;margin:auto;"> <div style="text-align: center; padding: 40px 0px;">  </div> <div style="border: 1px solid lightgrey;overflow:hidden;padding:10px;"> <h3 style="text-align:center;font-size:25px;margin: 0;margin-top:40px;">zaWash quote confirmation</h3> <h4 style="opacity: 0.5;text-align:center;font-size:17px;margin-bottom:10px;margin-top:20px;">Your quote is approved. Thanks !</h4> <div style="display: flex;margin-bottom:1rem;"> <h1 style="font-size:16px;margin:0;">quote details</h1> <hr style="border: none; border-top: 2px dotted lightgray; width: 62%;"> </div> <fieldset style="border: none;margin:0;padding:0;"> <h2 style="margin: 0; font-size: 15px; ">&#9998; Quote Number</h2> <h3 style="opacity: 0.6; font-size: 15px; margin: 0; margin-bottom: 1rem;">Quote Number</h3> <h2 style="margin: 0; font-size: 15px;">&#10148; Type of Service</h2> <h3 style="opacity: 0.6; font-size: 15px; margin: 0; margin-bottom: 1rem;">Type of Service</h3> <h2 style="margin: 0; font-size: 15px;">&#9998;  Number of cars</h2> <h3 style="opacity: 0.6; font-size: 15px; margin: 0; margin-bottom: 1rem;">Number of cars</h3> </fieldset> <div style="display: flex;margin-top:30px"> <h1 style="font-size:16px;margin:0;">Description</h1> <hr style="border: none; border-top: 2px dotted lightgray; width: 74%;"> </div> <div style="display:flex"> <div style="width:40%;display:flex;margin-top:10px"> <!-- <img src="https://zawash.my.site.com/zaWash/resource/1671082966000/Zawash/ZawashIcons/FULL.png" style="width:25px;height:25px"> --> <p style="margin-top: 4px; font-size: 14px;"></p> </div> <div style="width:60%;"> <h1 style="font-size:14px;margin-left:30px;"></h1> <div style="display:flex;font-size: 7px;margin-left:30px;"> </div> </div> </div>';

            string htmlContent = '<table><tr><td><h1 style="font-size:30px">zaWash<br></br><br></br></h1></td><td>zawash Suisse Sarl, Route des Jeunes 4bis, 1227 Les Acacias , Suisse</td><td></td><td></td></tr></table><h1 style="color:#ccc">_______________________________________</h1><br></br><table><tr><td></td><td></td><td>'+nameof+'</td></tr><tr><td></td><td></td><td>';
            if(accountnames[i].Work_Order__r.street == null)
            {
               accountnames[i].Work_Order__r.street = '';
            }
            htmlContent = htmlContent + accountnames[i].Work_Order__r.street;
            htmlContent = htmlContent + '</td></tr></table><br></br><table><tr><td><h1 style="color:green">'+quote.name+'</h1></td></tr><tr><td><h3>Date of invoice :</h3></td></tr><tr><td><h4>'+todaysDateStr+'</h4></td></tr></table><h1 style="color:#ccc">_______________________________________</h1><br></br><table><tr style="font-weight:bold"><td>Description</td><td style="text-align:center">Quantity</td><td style="text-align:center">Unit Price</td><td style="text-align:center">Taxes</td><td style="text-align:right">Total price</td></tr>  <tr style="color:#555"><td>'+accountnames[i].Work_Type__r.name+'</td><td style="text-align:center">'+quote.Number_of_Cars__c+'</td><td style="text-align:center">'+quote.Service_Price__c+'</td><td style="text-align:center">'+tax+'</td><td style="text-align:right">'+quote.Total_Quote_Price__c+'</td></tr>';
     
            for(CustomerOrder__c order : customerOrders)
            {
                htmlContent = htmlContent + '<tr style="color:#555"><td>'+order.Name+'</td><td style="text-align:center">'+order.Quantity__c+'</td><td style="text-align:center">'+(order.Price__c / order.Quantity__c)+'</td><td style="text-align:center">0.0%</td><td style="text-align:right">'+order.Price__c+'</td></tr>';
            }
     
            htmlContent = htmlContent + '</table><table><tr><td></td><td>______________________________________</td></tr></table><table><tr><td></td><td></td><td><h4 style="text-align:left">Amount excluding tax</h4></td><td><h4 style="text-align:right">'+quote.Service_Price__c+'</h4></td></tr><tr><td></td><td></td><td><h4 style="text-align:left">TVA '+tax+'</h4></td><td><h4 style="text-align:right"> '+taxcost+'</h4></td></tr></table><table><tr><td></td><td>______________________________________</td></tr></table><table><tr><td></td><td></td><td><h4 style="text-align:left">Total Price</h4></td><td><h4 style="text-align:right">'+quote.Total_Quote_Price__c+'</h4></td></tr></table>';
            //  string htmlContent = '<div id="myDiv"> <table style="border-bottom:1px solid #777"><tr><td style="vertical-align:top"> <h1>zaWash</h1></td><td> <p>zawash Suisse Sarl <br>Route des Jeunes 4bis<br>1227 Les Acacias <br> Suisse</p></td><td></td><td></td></tr> </table> <table style="margin-top: 10pt; margin-bottom: 10pt;"><tr><td style=" width: 1500pt;background: black;padding: 0.1pt;"></td></tr> </table> <h1>______________________________________</h1> <table><tr><td></td><td></td><td></td><td> <div class="username" style="color: green;">'+nameof+' <br> '+accountnames[i].Work_Order__r.street+' </div></td></tr> </table> <h1 style="color: darkgreen; position: relative;left: 3%;">'+quote.name+'</h1> <div style="font-family: sans-serif;font-weight: 700;position: relative;left: 200pt;">Date of invoice : </div> <div style="font-family: sans-serif;font-weight: 100;position: relative;left: 3%;">'+todaysDateStr+' </div> <table style="margin-top: 10pt; margin-bottom: 10pt;"><tr><td style=" width: 1000pt;background: black;padding: 0.1pt;"></td></tr> </table> <h1>______________________________________</h1> <table><tr style="font-weight: 700;"><th>Description</th><th>Quantity</th><th>Unit Price</th><th>Taxes</th><th>Total price </th></tr><tr style="background:#eeee; color:#777"><td>'+accountnames[i].Work_Type__r.name+'</td><td>'+quote.Number_of_Cars__c+'</td><td>'+quote.Service_Price__c+'</td><td>'+tax+'</td><td>'+quote.Total_Quote_Price__c+'</td></tr> </table></div><table> <tr><td style="width:200pt"></td><td><table> <tr><td><h4 style="font-weight: 700;">Amount excluding tax</h4></td><td style="left: 50pt; position: relative;"><h4>'+quote.Service_Price__c+' </h4></td> </tr> <tr><td><h4> TVA '+tax+'</h4></td><td style="left: 50pt; position: relative;"><h4>'+taxcost+' </h4></td> </tr>  <tr><td><h4 style="font-weight: 700;">Total Price</h4></td><td style="left: 50pt; position: relative;"><h4>'+quote.Total_Quote_Price__c+'</h4></td> </tr></table></td> </tr></table>';
            //   string htmlContent= '<div id="myDiv"> <div style="display: flex;margin-bottom: 4rem; "><div><h1>zaWash</h1></div><div style="margin-top: 2rem; margin-left: 1rem;color: green;">zawash Suisse Sarl <br>Route des Jeunes 4bis <br>1227 Les Acacias <br> Suisse </div> </div> <table style="margin-top: 10pt; margin-bottom: 10pt;"><tr><td style=" width: 1500pt;background: black;padding: 0.1pt;"></td></tr> </table> <table><tr><td style="width: 800pt;"></td><td> <div class="username" style="color: green;">'+nameof+' <br> '+accountnames[i].Work_Order__r.address+' </div></td></tr> </table> <h1 style="color: darkgreen; position: relative;left: 3%;">'+quote.name+'</h1> <div style="font-family: sans-serif;font-weight: 700;position: relative;left: 200pt;">Date of invoice : </div> <div style="font-family: sans-serif;font-weight: 100;position: relative;left: 3%;">'+todaysDateStr+' </div> <table style="margin-top: 10pt; margin-bottom: 10pt;"><tr><td style=" width: 1000pt;background: black;padding: 0.1pt;"></td></tr> </table> <table><tr style="font-weight: 700;"><th>Description</th><th>Quantity</th><th>Unit Price</th><th>Total price </th></tr><tr><td>'+accountnames[i].Work_Type__r.name+'</td><td>'+quote.Number_of_Cars__c+'</td><td>'+quote.Service_Price__c+'</td><td>'+quote.Total_Quote_Price__c+'</td></tr> </table></div><table> <tr><td style="width:200pt"></td><td><table> <tr><th><th><h4 style="font-weight: 700;">Amount excluding tax</h4></th><td style="left: 50pt; position: relative;"><h4>{Price} </h4></td></th> </tr> <tr><th><td><h4>Amount excluding tax</h4></td><td style="left: 50pt; position: relative;"><h4>{Price} </h4></td></th> </tr> <tr><th><th><h4 style="font-weight: 700;">Total Price</h4></th><td style="left: 50pt; position: relative;"><h4>{Price} </h4></td></th> </tr></table></td> </tr></table>';
            // string htmlContent= '<body style="left: 3%;position:relative;right:3%"> <div style="display: flex;     margin-bottom: 4rem;    "> <div> <h1>zaWash</h1></div> <div style="margin-top: 2rem; margin-left: 1rem;color: green;">zawash Suisse Sarl <br>Route des Jeunes 4bis <br> 1227 Les Acacias <br> Suisse </div> </div> <hr > <div class="username" >{username} <br> {Address} </div> <h1 style="color: darkgreen;    position: relative;left: 3%;">{Quote Number}</h1> <div style="font-family: sans-serif;font-weight: 700;position: relative;left: 3%;">Date of invoice :    </div> <div style="font-family: sans-serif;font-weight: 100;position: relative;left: 3%;">{date}  </div> <hr > <div style="display: flex; align-items: center;left: 6%;position: relative;"> <div style="font-family: sans-serif;font-weight: 700;">Description   </div> <div style="display: flex;     position: relative;    left: 40%;;"> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Quantity   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Unit Price   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Taxes   </h4> <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;">Total price    </h4> </div> </div> <div style="display: flex; align-items: center;left: 6%;position: relative;"> <div style="font-family: sans-serif;font-weight: 100;">Description   </div> <div style="display: flex;     position: relative;left: 40%;"> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">Quantity   </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">Unit Price   </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">Taxes   </h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;">Total price    </h4> </div> </div> <hr class="upper" > <div class="lower" > <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;     ">Amount excluding tax</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 4rem;    ">{Price}   </h4> </div> <div class="lower" > <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;     ">{Tax}</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 12rem;    ">{Price}   </h4> </div> <hr class="upper"> <div class="lower" > <h4 style="font-family: sans-serif;font-weight: 700; margin-right: 1rem;     ">Total</h4> <h4 style="font-family: sans-serif;font-weight: 100; margin-right: 1rem;    margin-left: 12rem;    ">{Price}   </h4> </div> </body>';
            Blob pdfData = Blob.toPDF('<HTML><BODY>'+htmlContent+'</BODY></HTML>');
            i++;
            /*CreatePDFController CreatePDFControl=new CreatePDFController();

            CreatePDFControl.htmlString=htmlContent;
            CreatePDFControl.recordId=quote.Id;
            CreatePDFControl.createAndAttachPDF(htmlContent,quote.Id);
            pdfs.add(a);*/
            pdfs.add(new Attachment(ParentId = quote.Id, Body = pdfData, Name = 'Order_' + quote.Id + '.pdf', ContentType='application/pdf'));
        }

        // Insert the PDF attachments

    }
    
    insert pdfs;

}